<script>
    document.addEventListener("DOMContentLoaded", function () {
        const stars = document.querySelectorAll('.star');
        const ratingForm = document.getElementById('rating-form');
        const ratingValueInput = document.getElementById('rating-value');
    
        let selectedRating = parseInt(ratingValueInput.value) || 0;  

        function updateStars(rating) {
            stars.forEach(star => {
                const starValue = parseInt(star.getAttribute('data-value'));
                if (starValue <= rating) {
                    star.classList.add('fa-solid'); 
                    star.classList.remove('fa-regular');
                } else {
                    star.classList.add('fa-regular'); 
                    star.classList.remove('fa-solid');
                }
            });
        }
 
        updateStars(selectedRating);

        stars.forEach(star => {
            star.addEventListener('mouseenter', () => {
                const hoverRating = parseInt(star.getAttribute('data-value'));
                stars.forEach(s => {
                    if (parseInt(s.getAttribute('data-value')) <= hoverRating) {
                        s.classList.add('hovered');
                    } else {
                        s.classList.remove('hovered');
                    }
                });
            });

            star.addEventListener('mouseleave', () => {
                stars.forEach(s => s.classList.remove('hovered'));
            });

            star.addEventListener('click', () => {
                selectedRating = parseInt(star.getAttribute('data-value'));
                ratingValueInput.value = selectedRating;
                updateStars(selectedRating);  
                ratingForm.submit();   
            });
        });
    });

    function setRating(value) {
        document.getElementById('rating-value').value = value;

        var stars = document.querySelectorAll('.star');
        stars.forEach(function(star, index) {
            if (index < value) {
                star.classList.remove('fa-regular');
                star.classList.add('fa-solid');
            } else {
                star.classList.remove('fa-solid');
                star.classList.add('fa-regular');
            }
        });
    }
</script>