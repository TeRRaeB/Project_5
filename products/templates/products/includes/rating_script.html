<script>
    document.addEventListener("DOMContentLoaded", function () {
        const ratingStars = document.querySelectorAll("#rating-form .star");
        const reviewStars = document.querySelectorAll("#review-stars .review-star");

        const ratingForm = document.getElementById("rating-form");
        const ratingValueInput = document.getElementById("rating-value");

        const reviewForm = document.getElementById("review-form");
        const reviewValueInput = document.getElementById("review-rating-value");

        function updateStars(stars, rating) {
            stars.forEach(star => {
                const starValue = parseInt(star.getAttribute("data-value"));
                if (starValue <= rating) {
                    star.classList.add("fa-solid");
                    star.classList.remove("fa-regular");
                } else {
                    star.classList.add("fa-regular");
                    star.classList.remove("fa-solid");
                }
            });
        }

        ratingStars.forEach(star => {
            star.addEventListener("click", () => {
                const selectedRating = parseInt(star.getAttribute("data-value"));
                ratingValueInput.value = selectedRating;
                updateStars(ratingStars, selectedRating);
                console.log("Rating selected: " + selectedRating); 
                ratingForm.submit(); 
            });
        });

        reviewStars.forEach(star => {
            star.addEventListener("click", () => {
                const selectedRating = parseInt(star.getAttribute("data-value"));
                reviewValueInput.value = selectedRating;
                updateStars(reviewStars, selectedRating);
            });
        });

        reviewForm.addEventListener('submit', function(e) {
            e.preventDefault();
            console.log("Review form submitted");

            const selectedRating = reviewValueInput.value;
            if (selectedRating > 0) {
                console.log("Submitting review with rating: " + selectedRating);  
                console.log(reviewForm);
                reviewForm.submit(); 
            } else {
                alert("Please select a rating before submitting your review.");
            }
        });
    });
</script>
